<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demokratick√Ω Kompas: V√°≈° Vliv na Svobodu</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; color: #333; line-height: 1.6; }
        .container { max-width: 1000px; margin: 40px auto; padding: 25px; background: #fff; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #1e88e5; text-align: center; margin-bottom: 25px; }
        .chart-box { padding: 20px; background-color: #e3f2fd; border-radius: 8px; margin-bottom: 30px; }
        .question-box { background-color: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 5px solid #1e88e5; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); }
        .answer-btn { display: block; width: 100%; padding: 12px; margin: 10px 0; border: none; background-color: #4db6ac; color: white; font-size: 16px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s, transform 0.1s; }
        .answer-btn:hover:not(:disabled) { background-color: #00897b; transform: translateY(-1px); }
        .answer-btn:disabled { background-color: #ccc; cursor: not-allowed; }
        #score-display { text-align: center; font-size: 1.5em; font-weight: bold; padding: 15px; background-color: #fff3e0; border: 1px solid #ffcc80; border-radius: 5px; margin-top: 30px; }
        .feedback { margin-top: 15px; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold; }
        .positive { background-color: #c8e6c9; color: #388e3c; }
        .negative { background-color: #ffcdd2; color: #d32f2f; }
        .reset-btn { background-color: #1e88e5; margin-top: 20px; }
        .reset-btn:hover { background-color: #1565c0; }
    </style>
</head>
<body>

<div class="container">
    <h1>üåç Demokratick√Ω Kompas: V√°≈° Vliv na Svobodu</h1>
    
    <div id="score-display">
        Aktu√°ln√≠ Sk√≥re Demokracie Projektu: <span id="current-score">0</span> bod≈Ø
    </div>

    <div class="chart-box">
        <h2>üìä Porovn√°n√≠ s referenƒçn√≠mi st√°ty</h2>
        <canvas id="democracyChart"></canvas>
    </div>

    <h2>‚ùì Ot√°zka <span id="question-number">1</span> z 10</h2>
    
    <div id="quiz-container">
        </div>

    <div id="results" style="display: none;">
        <h2>üéâ Konec Hry!</h2>
        <p>Dos√°hli jste koneƒçn√©ho sk√≥re: <span id="final-score">0</span> bod≈Ø.</p>
        <p id="final-verdict"></p>
        <button class="answer-btn reset-btn" onclick="resetQuiz()">Zaƒç√≠t znovu</button>
    </div>

</div>

<script>
    // ** GLOB√ÅLN√ç PROMƒöNN√â **
    let currentScore = 0;
    let currentQuestionIndex = 0;
    let projectData = { fh: 5, hfi: 5, eiu: 5 }; // V√Ωchoz√≠ pozice projektu
    const scoreEffect = 0.5; // Vliv na indexy za 1 bod
    let democracyChart; // Promƒõnn√° pro instanci Chart.js

    // ** DOM ELEMENTY **
    const quizContainer = document.getElementById('quiz-container');
    const scoreDisplay = document.getElementById('current-score');
    const questionNumberDisplay = document.getElementById('question-number');
    const resultsDiv = document.getElementById('results');
    const finalScoreDisplay = document.getElementById('final-score');
    const finalVerdictDisplay = document.getElementById('final-verdict');
    const ctx = document.getElementById('democracyChart').getContext('2d');

    // Pevn√© body 4 st√°t≈Ø (referenƒçn√≠ data)
    const fixedStatesData = {
        'Finsko üá´üáÆ (Demokracie)': { fh: 10, hfi: 9.5, eiu: 9.2 }, 
        'Maƒèarsko üá≠üá∫ (Hybridn√≠ Re≈æim)': { fh: 7, hfi: 7.5, eiu: 6.6 }, 
        'Bosna a Hercegovina üáßüá¶ (Hybridn√≠ Re≈æim)': { fh: 5.5, hfi: 6.0, eiu: 5.2 }, 
        'Bƒõlorusko üáßüáæ (Autorit√°≈ôstv√≠)': { fh: 1, hfi: 3.5, eiu: 1.9 }  
    };

    // Data ot√°zek
    const questions = [
        { q: "1. Fungov√°n√≠ m√©di√≠: Jak√° by mƒõla b√Ωt hlavn√≠ role m√©di√≠ ve st√°tƒõ?", a: { text: "B√Ωt nez√°visl√Ωm kontroln√≠m mechanismem...", score: 3 }, b: { text: "B√Ωt prim√°rnƒõ n√°strojem pro ≈°√≠≈ôen√≠ st√°tn√≠ch informac√≠...", score: 1 }, c: { text: "B√Ωt n√°strojem st√°tn√≠ propagandy...", score: -1 } },
        { q: "2. Svoboda shroma≈æƒèov√°n√≠: Kdy mohou obƒçan√© demonstrovat proti vl√°dƒõ?", a: { text: "Kdykoliv, bez pot≈ôeby povolen√≠...", score: 3 }, b: { text: "Pouze na m√≠stech urƒçen√Ωch √∫≈ôady a s p≈ôedchoz√≠m schv√°len√≠m...", score: 1 }, c: { text: "Demonstrace proti vl√°dƒõ jsou obecnƒõ zak√°z√°ny...", score: -1 } },
        { q: "3. Nez√°vislost soudnictv√≠: Jak se vyb√≠raj√≠ soudci nejvy≈°≈°√≠ch soud≈Ø?", a: { text: "Jsou jmenov√°ni na z√°kladƒõ odborn√© zp≈Øsobilosti...", score: 3 }, b: { text: "Jsou jmenov√°ni premi√©rem nebo prezidentem s mo≈ænost√≠ politick√©ho veta.", score: 1 }, c: { text: "Jsou jmenov√°ni p≈ô√≠mo vedouc√≠ stranou nebo dikt√°torem...", score: -1 } },
        { q: "4. Opozice: Jakou roli m√° opozice v parlamentu?", a: { text: "Maj√≠ stejn√Ω p≈ô√≠stup k ve≈ôejn√Ωm financ√≠m a m√©di√≠m...", score: 3 }, b: { text: "Jsou tolerov√°ni, ale je jim systematicky ztƒõ≈æov√°n p≈ô√≠stup k m√©di√≠m...", score: 1 }, c: { text: "Existuje jen form√°lnƒõ, ve skuteƒçnosti jsou jej√≠ p≈ôedstavitel√© zastra≈°ov√°ni...", score: -1 } },
        { q: "5. Volebn√≠ proces: Co by mƒõlo zajistit d≈Øvƒõryhodnost voleb?", a: { text: "V≈°echny strany maj√≠ rovn√Ω p≈ô√≠stup k voliƒç≈Øm a v√Ωsledky jsou ovƒõ≈ôeny nez√°visl√Ωmi mezin√°rodn√≠mi pozorovateli.", score: 3 }, b: { text: "Volebn√≠ komise je slo≈æena z politicky jmenovan√Ωch z√°stupc≈Ø...", score: 1 }, c: { text: "Volebn√≠ komise je pod kontrolou vl√°dy a kritika v√Ωsledk≈Ø je pova≈æov√°na za trestn√Ω ƒçin.", score: -1 } },
        { q: "6. Pr√°vo na soukrom√≠: Jak st√°t nakl√°d√° s digit√°ln√≠ komunikac√≠ obƒçan≈Ø?", a: { text: "Odposlechy nebo monitorov√°n√≠ jsou povoleny pouze na z√°kladƒõ soudn√≠ho p≈ô√≠kazu v z√°va≈æn√Ωch p≈ô√≠padech.", score: 3 }, b: { text: "Masivn√≠ sledov√°n√≠ je bƒõ≈æn√©, ale st√°t tvrd√≠, ≈æe je to jen z d≈Øvodu n√°rodn√≠ bezpeƒçnosti.", score: 1 }, c: { text: "St√°t m√° neomezen√Ω p≈ô√≠stup ke v≈°em dat≈Øm a komunikaci obƒçan≈Ø, ƒçasto bez soudn√≠ho dohledu.", score: -1 } },
        { q: "7. Akademick√° svoboda: Jak√Ω je vliv vl√°dy na univerzity a v√Ωzkum?", a: { text: "Univerzity si zcela nez√°visle stanovuj√≠ obsah v√Ωuky a v√Ωzkumn√© priority.", score: 3 }, b: { text: "Vl√°da dohl√≠≈æ√≠ na financov√°n√≠ a m≈Ø≈æe ovlivnit nƒõkter√© obory...", score: 1 }, c: { text: "Vl√°da urƒçuje, co se sm√≠ a nesm√≠ uƒçit nebo zkoumat...", score: -1 } },
        { q: "8. Korupce a transparentnost: Jak√Ω je postoj st√°tu k odhalen√© korupci?", a: { text: "Vl√°dn√≠ √∫≈ôedn√≠ci jsou okam≈æitƒõ vy≈°et≈ôov√°ni a st√≠h√°ni nez√°visl√Ωmi org√°ny...", score: 3 }, b: { text: "Vy≈°et≈ôov√°n√≠ se t√Ωk√° jen opoziƒçn√≠ch politik≈Ø, zat√≠mco p≈ô√≠pady vl√°dn√≠ch stran jsou odkl√°d√°ny.", score: 1 }, c: { text: "Korupce vl√°dn√≠ch √∫≈ôedn√≠k≈Ø je systematicky zamet√°na pod koberec a odhalen√≠ je trest√°no.", score: -1 } },
        { q: "9. Pr√°va men≈°in: Jak jsou chr√°nƒõna pr√°va n√°rodnostn√≠ch a sexu√°ln√≠ch men≈°in?", a: { text: "Pr√°va jsou plnƒõ chr√°nƒõna √∫stavou a z√°kony, st√°t aktivnƒõ bojuje proti diskriminaci.", score: 3 }, b: { text: "Pr√°va jsou sice deklarov√°na, ale jsou ƒçasto ignorov√°na...", score: 1 }, c: { text: "Men≈°iny jsou aktivnƒõ diskriminov√°ny, jejich organizace jsou zak√°z√°ny...", score: -1 } },
        { q: "10. Zmƒõna √∫stavy: Jak snadno m≈Ø≈æe vl√°da zmƒõnit √∫stavu?", a: { text: "Vy≈æaduje ≈°irokou politickou shodu (nap≈ô. dvout≈ôetinovou vƒõt≈°inu)...", score: 3 }, b: { text: "Vl√°dnouc√≠ strana m√° dostatek hlas≈Ø na to, aby mohla zmƒõnit √∫stavu bez konsenzu.", score: 1 }, c: { text: "Vl√°dnouc√≠ strana si m≈Ø≈æe √∫stavu zmƒõnit kdykoliv bez opozice...", score: -1 } }
    ];

    // Funkce pro barvy
    function getCountryColor(country) {
        if (country.includes('Finsko')) return 'rgba(76, 175, 80, 1)'; 
        if (country.includes('Maƒèarsko')) return 'rgba(255, 152, 0, 1)'; 
        if (country.includes('Bosna')) return 'rgba(255, 152, 0, 0.5)'; 
        if (country.includes('Bƒõlorusko')) return 'rgba(244, 67, 54, 1)'; 
        return 'rgba(0, 0, 0, 1)';
    }

    // Vytvo≈ôen√≠/Inicializace grafu
    function createChart() {
        if (democracyChart) {
            democracyChart.destroy(); // Zniƒç√≠ starou instanci, pokud existuje
        }
        
        const datasets = Object.keys(fixedStatesData).map(country => ({
            label: country,
            data: [
                fixedStatesData[country].fh, 
                fixedStatesData[country].hfi, 
                fixedStatesData[country].eiu
            ],
            fill: false,
            borderColor: getCountryColor(country),
            pointBackgroundColor: getCountryColor(country),
            pointRadius: 4,
            borderWidth: 2,
        }));
        
        datasets.push({
            label: 'V√°≈° Projekt (Pohyb)',
            data: [projectData.fh, projectData.hfi, projectData.eiu],
            backgroundColor: 'rgba(30, 136, 229, 0.4)', 
            borderColor: 'rgba(30, 136, 229, 1)',
            pointBackgroundColor: 'rgba(30, 136, 229, 1)',
            pointRadius: 6,
            borderWidth: 3,
        });

        democracyChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['Freedom House', 'Human Freedom Index', 'EIU Democracy Index'],
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    r: {
                        angleLines: { display: true },
                        suggestedMin: 0,
                        suggestedMax: 10,
                        ticks: { stepSize: 2, z: 1, color: '#333' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.formattedValue + ' b.';
                            }
                        }
                    }
                }
            }
        });
    }

    // Aktualizace dat projektu v grafu
    function updateChart(scoreChange) {
        const change = scoreChange * scoreEffect;
        
        projectData.fh = Math.max(0, Math.min(10, projectData.fh + change));
        projectData.hfi = Math.max(0, Math.min(10, projectData.hfi + change));
        projectData.eiu = Math.max(0, Math.min(10, projectData.eiu + change));

        const projectDatasetIndex = democracyChart.data.datasets.length - 1;
        democracyChart.data.datasets[projectDatasetIndex].data = [
            projectData.fh, projectData.hfi, projectData.eiu
        ];
        
        democracyChart.update();
    }

    // Funkce pro zobrazen√≠ aktu√°ln√≠ ot√°zky
    function showQuestion() {
        if (currentQuestionIndex < questions.length) {
            const qData = questions[currentQuestionIndex];
            questionNumberDisplay.textContent = currentQuestionIndex + 1;
            
            quizContainer.innerHTML = `
                <div class="question-box">
                    <strong>${qData.q}</strong>
                </div>
                <div id="answer-buttons">
                    <button class="answer-btn" onclick="selectAnswer(${qData.a.score})">A: ${qData.a.text}</button>
                    <button class="answer-btn" onclick="selectAnswer(${qData.b.score})">B: ${qData.b.text}</button>
                    <button class="answer-btn" onclick="selectAnswer(${qData.c.score})">C: ${qData.c.text}</button>
                </div>
                <div id="feedback-message"></div>
            `;
        } else {
            showResults();
        }
    }

    // Funkce pro zpracov√°n√≠ vybran√© odpovƒõdi
    function selectAnswer(scoreChange) {
        currentScore += scoreChange;
        scoreDisplay.textContent = currentScore;
        
        updateChart(scoreChange); // Aktualizuje graf

        const feedbackMessage = document.getElementById('feedback-message');
        feedbackMessage.className = 'feedback';

        if (scoreChange > 0) {
            feedbackMessage.classList.add('positive');
            feedbackMessage.innerHTML = `‚úÖ V√Ωbornƒõ! Demokracie projektu se **zv√Ω≈°ila o +${scoreChange} bod≈Ø**.`;
        } else if (scoreChange < 0) {
            feedbackMessage.classList.add('negative');
            feedbackMessage.innerHTML = `‚ùå Pozor! Va≈°e volba projektovou demokracii **sn√≠≈æila o ${scoreChange} bod**.`;
        } else {
            feedbackMessage.classList.add('neutral');
            feedbackMessage.innerHTML = `‚û°Ô∏è Neutr√°ln√≠ volba. Demokracie projektu se **zmƒõnila o 0 bod≈Ø**.`;
        }

        // Deaktivace tlaƒç√≠tek, aby se zabr√°nilo v√≠cen√°sobn√©mu kliknut√≠
        document.querySelectorAll('.answer-btn').forEach(btn => btn.disabled = true);
        
        setTimeout(() => {
            currentQuestionIndex++;
            showQuestion();
        }, 2500);
    }

    // Funkce pro zobrazen√≠ v√Ωsledk≈Ø
    function showResults() {
        quizContainer.style.display = 'none';
        resultsDiv.style.display = 'block';
        finalScoreDisplay.textContent = currentScore;

        let verdict = "";
        const maxScore = questions.length * 3; // 30
        const normalizedProjectScore = (currentScore / maxScore) * 10;

        if (normalizedProjectScore >= 8) {
            verdict = "V√°≈° Projekt m√° sk√≥re **Pln√° demokracie** (bl√≠zko Finsku). Skvƒõl√© rozhodov√°n√≠!";
        } else if (normalizedProjectScore >= 5) {
            verdict = "V√°≈° Projekt je **Chybn√° demokracie/Hybridn√≠ re≈æim** (bl√≠zko Maƒèarsku/Bosnƒõ). Nƒõkter√° rozhodnut√≠ oslabila svobody.";
        } else {
            verdict = "V√°≈° Projekt je **Autorit√°≈ôsk√Ω re≈æim** (bl√≠zko Bƒõlorusku). Vƒõt≈°ina rozhodnut√≠ smƒõ≈ôovala k omezov√°n√≠ svobod.";
        }
        finalVerdictDisplay.innerHTML = verdict;
    }
    
    // ** FUNKƒåN√ç RESET KV√çZU **
    function resetQuiz() {
        // 1. Resetov√°n√≠ promƒõnn√Ωch na v√Ωchoz√≠ stav
        currentScore = 0;
        currentQuestionIndex = 0;
        projectData = { fh: 5, hfi: 5, eiu: 5 }; 

        // 2. Skryt√≠ v√Ωsledk≈Ø a zobrazen√≠ kv√≠zu
        resultsDiv.style.display = 'none';
        quizContainer.style.display = 'block';

        // 3. Resetov√°n√≠ zobrazen√≠ sk√≥re
        scoreDisplay.textContent = currentScore;
        
        // 4. Resetov√°n√≠ grafu (nutn√© zniƒçit a znovu vytvo≈ôit)
        createChart(); // Funkce novƒõ obsahuje logiku destroy() a vytvo≈ôen√≠ s resetovan√Ωmi daty

        // 5. Zobrazen√≠ prvn√≠ ot√°zky
        showQuestion();
    }

    // Spu≈°tƒõn√≠ aplikace po naƒçten√≠ str√°nky
    createChart();
    showQuestion();
</script>

</body>
</html>